//=============================================================================
// Olivia Engine - Weapon Swap - for RPG Maker MV version 1.6.1
// Olivia_WeaponSwap.js
//=============================================================================
 /*:
 * @plugindesc <WeaponSwap> for RPG Maker MV version 1.6.1.
 * @author Fallen Angel Olivia
 *
 * @help
 * This is a RPG Maker MV plugin that will give your game's actors the function
 * to swap weapons in the middle of the fight. Up to one of each weapon type
 * can be equipped at a time and they can be switched out each turn. Swapping
 * weapons can let the player team adapt to certain situations better or giving
 * them the ability to hit certain weapon weaknesses in battle.
 *
 * This plugin changes both something inside battle and outside of battle.
 * The Attack command option can now have the weapon being used swapped by
 * pressing left or right (if that option is turned on). Some skills can also
 * automatically switch to a weapon when it starts being used.
 *
 * The other change is in the Equip menu. Instead of having only a single
 * weapon slot, there is now one weapon slot for each of the weapon types.
 * Each actor can equip a weapon of that type into those slots if they can use
 * those weapon types.
 *
 * There will be a warning though. This feature does not work with the
 * Dual Wield system so it is disabled in order to be able to swap weapons.
 *
 * Some plugin parameters require your attention. Please read through and
 * configure them to customize weapon swapping for your game.
 *
 * -----------------
 * Plugin Parameters
 * -----------------
 *
 * Battle Control: 
 *
 * Swap Command: How command for how Weapon Swap is displayed
 *
 * Show Command?: Show the Weapon Swap Command in the Actor Command Window?
 * Turn this on if you are making your game for mouse control because there
 * is no other way to switch weapons without using the arrow keys.
 *
 * Use Arrow Swapping?: Use Arrow Keys to control weapon swapping? If on,
 * then pressing left or right will switch the weapon currently equipped
 * in the order of the Weapon Types list in the Database's Types tab.
 *
 * Show Swap Arrows?: Shows arrow sprites next to the Attack command to tell
 * the player that pressing Left or Right here can have an effect.
 *
 * Battle Test Weapons: During battle test, equip each party member with one of
 * each weapon type. The weapon selected will be the first available one in the
 * database unless they already have that weapon equipped.
 *
 * Visuals:
 * 
 * Show Battle Icons: Show icons of currently equipped weapons in battle?
 * This will show the icon next to the Attack command, making it easier for
 * the player to know which weapon the actor has currently equipped.
 *
 * Show Battle Action: Show animation of actor switching weapons? This is
 * for sideview only. When weapon switching is done during Attack switching,
 * the actor will perform an attack motion to display the weapon it is 
 * currently equipped with.
 *
 * Extend Equip Stat Window: If you are using Yanfly's Equip Core, this will
 * extend the stat compare window to have Hit Accuracy, Evasion, and Critical.
 *
 *
 *
 * --------
 * Notetags
 * --------
 * 
 * Skill and Item Notetags:
 *
 * <Switch to Weapon: x>
 * <Switch to Weapon: text>
 * When the actor uses this skill or item, the actor will switch to this
 * weapon if it is equipped when the skill cost is paid. x is the weapon
 * type ID and text is the weapon name. If you use the weapon name, type
 * it out exactly since it is case sensitive. This notetag does not make
 * the weapon a requirement. To make it a requirement, use the database's
 * "Required Weapon" dropdown lists to enforce the requirement.
 *
 *
 *
 * Skill Notetags:
 *
 * <Require Any Weapon>
 * Requires any kind of weapon to be equipped in order to use it.
 *
 * <Require Weapon Types: x>
 * <Require Weapon Types: x, x, x>
 * Insert multiple x to add more weapon types. All of the weapon types must
 * be equipped in order for this skill to be used.
 *
 *
 *
 * ---------------
 * Action Sequence
 * ---------------
 *
 * If you are using YEP Battle Engine Core, there is an action sequence that
 * lets you switch weapons for the actor in the middle of an action sequence:
 *
 * Weapon Swap: targets, x
 * or
 * Weapon Swap: targets, text
 * or
 * Swap Weapon: targets, x
 * or
 * Swap Weapon: targets, text
 *
 * Use x with the weapon type ID in the Database Type tab. Or use text and
 * replace it with the name of the weapon type. If you use the name of the
 * weapon type, type it out exactly as it is spelled because it is case
 * sensitive.
 *
 *
 *
 * -------------------
 * W A R N I N G ! ! !
 * -------------------
 *
 * This plugin is made for RPG Maker MV versions 1.6.1 and below. If you update
 * RPG Maker MV past that and this plugin breaks, I am NOT responsible for it.
 *
 * -------------
 * Compatibility
 * -------------
 *
 * This plugin is compatible with the following plugins:
 *
 * - YEP Core Engine
 * - YEP Battle Engine Core
 * - YEP Action Sequence Packs 1, 2, 3
 * - YEP Animated Sideview Enemies
 * - YEP Buffs & States Core
 * - YEP Damage Core
 * - YEP Element Core
 * - YEP Item Core
 * - YEP Equip Core
 *
 * Place this plugin under those in the Plugin Manager list.
 *
 * ------------
 * Terms of Use
 * ------------
 * 
 * 1. These plugins may be used in free or commercial games.
 * 2. 'Fallen Angel Olivia' must be given credit in your games.
 * 3. You are allowed to edit the code.
 * 4. Do NOT change the filename, parameters, and information of the plugin.
 * 5. You are NOT allowed to redistribute these Plugins.
 * 6. You may NOT take code for your own released Plugins without credit.
 *
 * -------
 * Credits
 * -------
 *
 * If you are using this plugin, credit the following people:
 * 
 * - Fallen Angel Olivia
 *
 * @param 
 * @param 
 * @param ATTENTION!!!
 * @default READ THE HELP FILE
 * @param 
 * @param 
 *
 * @param Weapon Swap Battle Control
 * @text Battle Control
 * @parent Weapon Swap System 
 *
 * @param Weapon Swap Command
 * @text Swap Command
 * @parent Weapon Swap Battle Control
 * @desc How command for how Weapon Swap is displayed
 * @default WpnSwap
 *
 * @param Weapon Swap Show Command
 * @text Show Command?
 * @parent Weapon Swap Command
 * @type boolean
 * @on On
 * @off Off
 * @desc Show the Weapon Swap Command in the Actor Command Window?
 * @default false
 *
 * @param Weapon Swap Arrow Buttons
 * @text Use Arrow Swapping?
 * @parent Weapon Swap Battle Control
 * @type boolean
 * @on On
 * @off Off
 * @desc Use Arrow Keys to control weapon swapping?
 * @default true
 *
 * @param Weapon Swap Show Arrows
 * @text Show Swap Arrows?
 * @parent Weapon Swap Battle Control
 * @type boolean
 * @on On
 * @off Off
 * @desc Show arrows on the attack command?
 * @default true
 *
 * @param Weapon Swap Battle Test
 * @text Battle Test Weapons
 * @parent Weapon Swap Battle Control
 * @type boolean
 * @on On
 * @off Off
 * @desc In battle test, give all party members a copy of each weapon?
 * @default true
 *
 * @param Weapon Swap Visual
 * @text Visuals
 * @parent  Weapon Swap System
 *
 * @param Weapon Swap Battle Icons
 * @text Show Battle Icons
 * @parent Weapon Swap Visual
 * @type boolean
 * @on On
 * @off Off
 * @desc Show icons of currently equipped weapons in battle?
 * @default true
 *
 * @param Weapon Swap Battle Action
 * @text Show Battle Action
 * @parent Weapon Swap Visual
 * @type boolean
 * @on On
 * @off Off
 * @desc Show animation of actor switching weapons? Sideview only
 * @default true
 *
 * @param Weapon Swap Equip Core Window
 * @text Extend Equip Stat Window
 * @parent Weapon Swap Visual
 * @type boolean
 * @on On
 * @off Off
 * @desc Require Yanfly's Equip Core. Extend the stat compare window
 * @default true
 *
 * @param Weapon Swap Text Hit
 * @text Text Hit Rate
 * @parent Weapon Swap Equip Core Window
 * @desc How to display this extra parameter
 * @default ACC
 *
 * @param Weapon Swap Text Evasion
 * @text Text Evasion
 * @parent Weapon Swap Equip Core Window
 * @desc How to display this extra parameter
 * @default EVA
 *
 * @param Weapon Swap Text Critical
 * @text Text Critical
 * @parent Weapon Swap Equip Core Window
 * @desc How to display this extra parameter
 * @default CRI
 *
 * @param
 * @param
 *
 */
//=============================================================================

var _0xb9f3=['_currentIndex','iconIndex','drawExtraParamDifference','contents','Util','drawWeaponIcon','_list','constructor','commandWeaponSlot','BattleAction','_swapWeapons','swapWeaponBattle','Weapon\x20Swap\x20Text\x20Hit','right','canEquip','paramchangeTextColor','_arrowWidth','note','Weapon\x20Swap\x20Text\x20Critical','drawDarkRect','switchToWeaponType','WEAPON\x20SWAP','members','cri','slotName','_parent','optimizeEquipments','addChild','refresh','contentsOpacity','weapons','lineHeight','___Scene_Battle_createActorCommandWindow___','isWeaponSwapEnabled','failsToMeetSkillConditionRequireWeaponTypes','eva','processActionSequence','TextHit','contains','drawNewExtraParam','symbol','bestEquipItem','isRepeated','attack','bestEquipWeapon','createActorCommandWindow','tradeItemWithParty','___Scene_Equip_onSlotOk___','___Window_ActorCommand_addAttackCommand___','createBitmap','ShowIcons','isEnabled','WpnBattleTest','setTempActor','inBattle','addAttackCommand','___Window_EquipItem_includes___','description','___Window_EquipSlot_slotName___','Olivia_OctoBattle','___Window_EquipSlot_isEnabled___','drawExtraParamItem','systemColor','_iconWidth','getFirstSwapWeapon','isActor','___Game_Actor_initEquips___','drawCurrentExtraParam','bitmap','drawItemName','playOkSound','addWeaponSwapCommand','actor','TextCri','YEP_EquipCore','_tempActor','Weapon\x20Swap\x20Battle\x20Action','Weapon\x20Swap\x20Command','Weapon\x20Swap\x20Show\x20Command','currentSymbol','_statusWindow','___Window_EquipItem_initialize___','hit','setActor','bind','___BattleManager_processActionSequence___','show','_weaponTypeId','calcEquipItemPerformance','drawIcon','setupBattleTestMembers','performAttack','initEquips','changeWeapon','Window','updateOpacity','call','anchor','_equips','_nameWidth','Weapon\x20Swap\x20Battle\x20Icons','_itemWindow','update','EVA','clearEquipments','drawItemWeaponSwapEquipCore','standardPadding','prototype','width','YEP_BattleEngineCore','processCursorMove','changeTextColor','ACC','___Window_EquipItem_setSlotId___','_paramValueWidth','push','isEquipChangeOk','setupBitmap','setObject','WpnSwapArrows','Weapon\x20Swap\x20Error','Window_EquipItem_setSlotId','_slotWindow','WeaponSwap','You\x20do\x20not\x20have\x20a\x20weapon\x20made\x20for\x20weapon\x20type\x20','onlyUnique','equips','optimizeWeapons','changeEquip','hide','isEquipWtypeOk','drawExtraParamItemName','paySkillCost','filter','forceChangeEquip','initializeWeaponSwap','_actorCommandWindow','wtypeId','Weapon\x20Swap\x20Equip\x20Core\x20Window','drawItem','Equip','setSlotId','setHandler','openness','textPadding','_weaponRightArrowSprite','setFrame','_weaponLeftArrowSprite','Enabled','active','activate','indexOf','parse','makeDeepCopy','index','true','initialize','playEquip','itemRectForText','___Game_BattlerBase_meetsSkillConditions___','itemRect','printError','___Game_Actor_releaseUnequippableItems___','match','weaponTypes','create','getSwapWeapons','_slotId','Weapon\x20Swap\x20Text\x20Evasion','Weapon','_usedWeaponSlot','clamp','actionWeaponSwap','___Game_BattlerBase_paySkillCost___','___Window_ActorCommand_initialize___','equipSlots','includes','isWtypeEquipped','CRI','itemTextAlign','OctoBattle','_direction','_paramNameWidth','left','Scene_Equip_onSlotOk','onSlotOk','Weapon\x20Swap\x20Arrow\x20Buttons','___Window_StatCompare_refresh___','Weapon\x20Swap\x20Show\x20Arrows','drawText','Param','failsToMeetSkillConditionRequireAnyWeapon','ExtraLines','addLoadListener','createBattleTestWeaponTypes','_actor','item','length','weaponSwap','drawItemWeaponSwapBase','___Game_Party_setupBattleTestMembers___','___Game_Actor_changeEquip___','findSymbol','meetsSkillConditions','isDualWield','releaseUnequippableItems','updateHelp','___Window_EquipSlot_updateHelp___','WpnSwapShow','changePaintOpacity','visible','applyWeaponSwapOnCost','_bonusValueWidth','opacity','clearWeapons','stop','drawEmptySlot','round','drawExtraParameters','parameters','getItemFromIndex','WpnSwapCmd','createWeaponArrowSprites','setSwapWeaponSlot','<WeaponSwap>','battleTestGetFirstOfWtype'];(function(_0xc827d7,_0xb9f396){var _0x2de8f5=function(_0x649c9b){while(--_0x649c9b){_0xc827d7['push'](_0xc827d7['shift']());}};_0x2de8f5(++_0xb9f396);}(_0xb9f3,0x98));var _0x2de8=function(_0xc827d7,_0xb9f396){_0xc827d7=_0xc827d7-0x0;var _0x2de8f5=_0xb9f3[_0xc827d7];return _0x2de8f5;};var Imported=Imported||{};Imported[_0x2de8('0x85')]=!![];var Olivia=Olivia||{};Olivia[_0x2de8('0x1c')]=Olivia[_0x2de8('0x1c')]||{};var parameters=$plugins[_0x2de8('0xcf')](function(_0x4eb503){return _0x4eb503[_0x2de8('0x83')][_0x2de8('0x70')](_0x2de8('0x48'));})[0x0][_0x2de8('0x43')];Olivia[_0x2de8('0x1c')][_0x2de8('0xc5')]={'Enabled':eval(parameters['Weapon\x20Swap\x20System']),'WpnSwapCmd':String(parameters[_0x2de8('0x97')]),'WpnSwapShow':eval(parameters[_0x2de8('0x98')]),'WpnSwapArrows':eval(parameters[_0x2de8('0x22')]),'ShowArrows':eval(parameters[_0x2de8('0x24')]||'true'),'WpnBattleTest':eval(parameters['Weapon\x20Swap\x20Battle\x20Test']||_0x2de8('0x3')),'ShowIcons':eval(parameters[_0x2de8('0xae')]),'BattleAction':eval(parameters[_0x2de8('0x96')]),'ExtraLines':eval(parameters[_0x2de8('0xd4')]||'true'),'TextHit':String(parameters[_0x2de8('0x56')]||_0x2de8('0xba')),'TextEva':String(parameters[_0x2de8('0x10')]||_0x2de8('0xb1')),'TextCri':String(parameters[_0x2de8('0x5c')]||_0x2de8('0x1a'))};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')]=Olivia[_0x2de8('0x1c')][_0x2de8('0x11')]||{};if(Imported[_0x2de8('0xb7')]){Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x9f')]=BattleManager[_0x2de8('0x6e')];BattleManager[_0x2de8('0x6e')]=function(_0x105010,_0xeaeea1){if(_0x105010===_0x2de8('0x5f')||_0x105010==='SWAP\x20WEAPON'){return this[_0x2de8('0x14')](_0xeaeea1);}return Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x9f')][_0x2de8('0xaa')](this,_0x105010,_0xeaeea1);};BattleManager[_0x2de8('0x14')]=function(_0x53e660){var _0x205a8c=this['makeActionTargets'](_0x53e660[0x0])['filter'](Yanfly[_0x2de8('0x4e')][_0x2de8('0xc7')]);var _0x4beb92=_0x53e660[0x1];if($dataSystem[_0x2de8('0xc')][_0x2de8('0x70')](_0x4beb92)){var _0xc678b0=$dataSystem[_0x2de8('0xc')]['indexOf'](_0x4beb92);}else{var _0xc678b0=parseInt(_0x4beb92);}for(var _0x2516f3=0x0;_0x2516f3<_0x205a8c[_0x2de8('0x2d')];_0x2516f3++){var _0x1c8e60=_0x205a8c[_0x2516f3];if(!!_0x1c8e60&&_0x1c8e60[_0x2de8('0x8b')]()){_0x1c8e60[_0x2de8('0x5e')](_0xc678b0);}}};}Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x15')]=Game_BattlerBase[_0x2de8('0xb5')][_0x2de8('0xce')];Game_BattlerBase[_0x2de8('0xb5')][_0x2de8('0xce')]=function(_0x3b298b){Olivia[_0x2de8('0x1c')]['Weapon'][_0x2de8('0x15')]['call'](this,_0x3b298b);if(this[_0x2de8('0x8b')]()){this[_0x2de8('0x3b')](_0x3b298b);}};Olivia[_0x2de8('0x1c')]['Weapon'][_0x2de8('0x7')]=Game_BattlerBase[_0x2de8('0xb5')]['meetsSkillConditions'];Game_BattlerBase[_0x2de8('0xb5')][_0x2de8('0x33')]=function(_0x363f0d){if(this['failsToMeetSkillConditionRequireAnyWeapon'](_0x363f0d)){return![];}else if(this['failsToMeetSkillConditionRequireWeaponTypes'](_0x363f0d)){return![];}else{return Olivia[_0x2de8('0x1c')][_0x2de8('0x11')]['___Game_BattlerBase_meetsSkillConditions___'][_0x2de8('0xaa')](this,_0x363f0d);}};Game_BattlerBase['prototype'][_0x2de8('0x27')]=function(_0x50228c){return _0x50228c['note'][_0x2de8('0xb')](/<Require Any Weapon>/i)&&this[_0x2de8('0x8b')]()&&!this[_0x2de8('0xc8')]()[0x0];};Game_BattlerBase[_0x2de8('0xb5')][_0x2de8('0x6c')]=function(_0x53ec96){if(this['isEnemy']()){return![];}else if(Olivia[_0x2de8('0x1c')][_0x2de8('0xc5')][_0x2de8('0xde')]){if(_0x53ec96[_0x2de8('0x5b')][_0x2de8('0xb')](/<Require Weapon Types:[ ]*(\d+(?:\s*,\s*\d+)*)>/i)){var _0x3e0cce=JSON[_0x2de8('0x0')]('['+RegExp['$1']['match'](/\d+/g)+']');for(var _0x290c2b=0x0;_0x290c2b<_0x3e0cce[_0x2de8('0x2d')];_0x290c2b++){var _0x37a0ce=_0x3e0cce[_0x290c2b];if(!this[_0x2de8('0x19')](_0x37a0ce)){return!![];}}}}return![];};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x8c')]=Game_Actor[_0x2de8('0xb5')]['initEquips'];Game_Actor[_0x2de8('0xb5')][_0x2de8('0xa6')]=function(_0x2a1174){Olivia[_0x2de8('0x1c')]['Weapon'][_0x2de8('0x8c')]['call'](this,_0x2a1174);this[_0x2de8('0xd1')]();};Game_Actor[_0x2de8('0xb5')][_0x2de8('0xd1')]=function(){this['_usedWeaponSlot']=0x0;this[_0x2de8('0x54')]=[];for(var _0x55002b=0x0;_0x55002b<$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')];_0x55002b++){if(this[_0x2de8('0xcc')](_0x55002b)){this['_usedWeaponSlot']=this[_0x2de8('0x12')]||_0x55002b;}this[_0x2de8('0x54')]['push'](0x0);}var _0x1e6cdd=this[_0x2de8('0x68')]()[0x0];if(!!_0x1e6cdd){var _0x21e309=_0x1e6cdd[_0x2de8('0xd3')];this['_swapWeapons'][_0x21e309]=_0x1e6cdd['id'];}};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x34')]=function(){return![];};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x19')]=function(_0x28af19){if(this[_0x2de8('0x54')]===undefined){this['initializeWeaponSwap']();}return this[_0x2de8('0x54')][_0x28af19]>0x0;};Game_Actor[_0x2de8('0xb5')][_0x2de8('0xe')]=function(){if(this['_swapWeapons']===undefined){this[_0x2de8('0xd1')]();}var _0x461974=[];for(var _0x529b63=0x1;_0x529b63<this[_0x2de8('0x54')][_0x2de8('0x2d')];_0x529b63++){weaponId=this[_0x2de8('0x54')][_0x529b63];_0x461974[_0x2de8('0xbd')]($dataWeapons[weaponId]);}return _0x461974;};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x8a')]=function(){if(this[_0x2de8('0x54')]===undefined){this[_0x2de8('0xd1')]();}for(var _0x10ed50=0x1;_0x10ed50<this[_0x2de8('0x54')][_0x2de8('0x2d')];_0x10ed50++){weaponId=this[_0x2de8('0x54')][_0x10ed50];if(weaponId>0x0){return $dataWeapons[weaponId];}}return null;};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x47')]=function(_0x40375a,_0x55c8b4){if(this[_0x2de8('0x54')]===undefined){this[_0x2de8('0xd1')]();}this[_0x2de8('0x54')][_0x40375a]=_0x55c8b4;};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')]['___Game_Actor_changeEquip___']=Game_Actor[_0x2de8('0xb5')][_0x2de8('0xca')];Game_Actor['prototype'][_0x2de8('0xca')]=function(_0x3bdae2,_0x1764d9){if(_0x3bdae2===0x0){this[_0x2de8('0xa7')](_0x1764d9);}else{Olivia['OctoBattle'][_0x2de8('0x11')][_0x2de8('0x31')][_0x2de8('0xaa')](this,_0x3bdae2,_0x1764d9);}};Game_Actor['prototype']['changeWeapon']=function(_0x9ccba2){var _0x25a48e=this[_0x2de8('0x68')]()[0x0];if(!!_0x9ccba2){this[_0x2de8('0x5e')](_0x9ccba2[_0x2de8('0xd3')],![]);_0x25a48e=this[_0x2de8('0x68')]()[0x0];var _0x377097=_0x9ccba2['wtypeId'];if(!!_0x25a48e&&_0x25a48e[_0x2de8('0xd3')]===_0x9ccba2['wtypeId']){this['tradeItemWithParty'](_0x9ccba2,_0x25a48e);}else{this[_0x2de8('0x78')](_0x9ccba2,null);}this[_0x2de8('0x47')](_0x377097,_0x9ccba2['id']);this[_0x2de8('0x12')]=_0x377097;this[_0x2de8('0xac')][0x0][_0x2de8('0xc0')](_0x9ccba2);}else if(!!_0x25a48e){var _0x377097=_0x25a48e[_0x2de8('0xd3')];this[_0x2de8('0x47')](_0x377097,0x0);this[_0x2de8('0x78')](null,_0x25a48e);this[_0x2de8('0xac')][0x0][_0x2de8('0xc0')](null);var _0x491b9c=this['getFirstSwapWeapon']();if(_0x491b9c){this[_0x2de8('0x12')]=_0x491b9c[_0x2de8('0xd3')];}else{this[_0x2de8('0x12')]=0x1;}}this[_0x2de8('0x66')]();};Game_Actor['prototype'][_0x2de8('0x5e')]=function(_0x3f0127,_0x5696a9){var _0x16b5f6=$dataWeapons[this[_0x2de8('0x54')][_0x3f0127]];this[_0x2de8('0xac')][0x0]['setObject'](_0x16b5f6);this[_0x2de8('0x12')]=_0x3f0127;this[_0x2de8('0x66')]();if($gameParty[_0x2de8('0x80')]()&&_0x5696a9&&Olivia[_0x2de8('0x1c')][_0x2de8('0xc5')][_0x2de8('0x53')]){this[_0x2de8('0xa5')]();}};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x55')]=function(_0x240651){if(this[_0x2de8('0x54')]===undefined){this[_0x2de8('0xd1')]();}var _0x396cd6=this['_usedWeaponSlot'];while(!![]){if(_0x240651===_0x2de8('0x57')){_0x396cd6+=0x1;if(_0x396cd6>=$dataSystem['weaponTypes'][_0x2de8('0x2d')]){_0x396cd6=0x1;}}else{_0x396cd6-=0x1;if(_0x396cd6<=0x0){_0x396cd6=$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x1;}}if(this[_0x2de8('0x54')][_0x396cd6]>0x0){this[_0x2de8('0x12')]=_0x396cd6;this[_0x2de8('0x5e')](_0x396cd6,!![]);break;}if(_0x396cd6===this[_0x2de8('0x12')]){break;}}};Game_Actor[_0x2de8('0xb5')]['applyWeaponSwapOnCost']=function(_0x17a361){if(_0x17a361[_0x2de8('0x5b')]['match'](/<Switch to Weapon: (\d+)>/i)){var _0x5866c8=parseInt(RegExp['$1'])[_0x2de8('0x13')](0x1,$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x1);}else if(_0x17a361['note'][_0x2de8('0xb')](/<Switch to Weapon: (.*)>/i)){var _0x49197a=String(RegExp['$1']);var _0x5866c8=$dataSystem[_0x2de8('0xc')][_0x2de8('0xe1')](_0x49197a);if(_0x5866c8>0x0){this['switchToWeaponType'](_0x5866c8);}}};Olivia['OctoBattle']['Weapon'][_0x2de8('0xa')]=Game_Actor[_0x2de8('0xb5')][_0x2de8('0x35')];Game_Actor[_0x2de8('0xb5')][_0x2de8('0x35')]=function(_0xef75f4){if(this[_0x2de8('0x54')]===undefined){this[_0x2de8('0xd1')]();}Olivia[_0x2de8('0x1c')][_0x2de8('0x11')]['___Game_Actor_releaseUnequippableItems___'][_0x2de8('0xaa')](this,_0xef75f4);for(var _0x578090=0x1;_0x578090<this[_0x2de8('0x54')][_0x2de8('0x2d')];_0x578090++){var _0x13d2c4=this[_0x2de8('0x54')][_0x578090];if(_0x13d2c4>0x0){var _0x123540=$dataWeapons[_0x13d2c4];if(!this[_0x2de8('0x58')](_0x123540)){if(!_0xef75f4){this[_0x2de8('0x78')](null,_0x123540);}this['_swapWeapons'][_0x578090]=0x0;}}}};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x64')]=function(){var _0x521882=this['equipSlots']()[_0x2de8('0x2d')];this['clearEquipments']();for(var _0x347c6b=0x1;_0x347c6b<_0x521882;_0x347c6b++){if(this[_0x2de8('0xbe')](_0x347c6b)){this[_0x2de8('0xca')](_0x347c6b,this[_0x2de8('0x73')](_0x347c6b));}}this['optimizeWeapons']();};Game_Actor[_0x2de8('0xb5')][_0x2de8('0xc9')]=function(){var _0xf7d5bc=this[_0x2de8('0x12')];for(var _0x4cc90b=0x1;_0x4cc90b<$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')];_0x4cc90b++){if(this[_0x2de8('0xcc')](_0x4cc90b)){this[_0x2de8('0xa7')](this[_0x2de8('0x76')](_0x4cc90b));}}this[_0x2de8('0x12')]=_0xf7d5bc;};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x76')]=function(_0x3e4f4e){var _0x49804b=$gameParty['weapons']()[_0x2de8('0xcf')](function(_0x5bcec0){return _0x5bcec0[_0x2de8('0xd3')]===_0x3e4f4e&&this[_0x2de8('0xcc')](_0x3e4f4e);},this);var _0xdb9228=null;var _0x2a9471=-0x3e8;for(var _0x405651=0x0;_0x405651<_0x49804b[_0x2de8('0x2d')];_0x405651++){var _0x53a8b2=this[_0x2de8('0xa2')](_0x49804b[_0x405651]);if(_0x53a8b2>_0x2a9471){_0x2a9471=_0x53a8b2;_0xdb9228=_0x49804b[_0x405651];}}return _0xdb9228;};Game_Actor[_0x2de8('0xb5')][_0x2de8('0xb2')]=function(){var _0x2b6775=this['equipSlots']()[_0x2de8('0x2d')];for(var _0x1292a6=0x1;_0x1292a6<_0x2b6775;_0x1292a6++){if(this[_0x2de8('0xbe')](_0x1292a6)){this[_0x2de8('0xca')](_0x1292a6,null);}}this[_0x2de8('0x3e')]();};Game_Actor[_0x2de8('0xb5')][_0x2de8('0x3e')]=function(){if(Imported[_0x2de8('0x94')]&&Yanfly[_0x2de8('0x26')]['EquipNonRemove'][_0x2de8('0x70')](0x1)){return;}var _0x10d1e9=0x0;for(var _0x250f11=0x1;_0x250f11<$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')];_0x250f11++){if(this[_0x2de8('0xcc')](_0x250f11)){_0x10d1e9=_0x10d1e9||_0x250f11;this[_0x2de8('0x5e')](_0x250f11,![]);this[_0x2de8('0xa7')](null);}}this[_0x2de8('0x12')]=_0x10d1e9;};if(Olivia[_0x2de8('0x1c')]['WeaponSwap'][_0x2de8('0x7e')]){Olivia[_0x2de8('0x1c')]['Weapon'][_0x2de8('0x30')]=Game_Party['prototype'][_0x2de8('0xa4')];Game_Party[_0x2de8('0xb5')]['setupBattleTestMembers']=function(){Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x30')]['call'](this);var _0xf0358b=this[_0x2de8('0x2a')]();var _0x4c9ad0=this[_0x2de8('0x60')]();for(var _0x3ec1ab=0x0;_0x3ec1ab<_0x4c9ad0['length'];_0x3ec1ab++){member=_0x4c9ad0[_0x3ec1ab];if(!!member){for(var _0x529757=0x1;_0x529757<_0xf0358b[_0x2de8('0x2d')];_0x529757++){if(!member['isWtypeEquipped'](_0x529757)){member[_0x2de8('0xca')](0x0,_0xf0358b[_0x529757]);}}if(!!member[_0x2de8('0x8a')]()){member[_0x2de8('0x5e')](member[_0x2de8('0x8a')]()[_0x2de8('0xd3')],![]);}else{member[_0x2de8('0x5e')](0x0,![]);}}}};Game_Party['prototype'][_0x2de8('0x2a')]=function(){var _0x256761=[null];for(var _0x5aac87=0x1;_0x5aac87<$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')];_0x5aac87++){_0x256761[_0x2de8('0xbd')](this[_0x2de8('0x49')](_0x5aac87));}return _0x256761;};Game_Party[_0x2de8('0xb5')]['battleTestGetFirstOfWtype']=function(_0x1c74ba){for(var _0xd1ba8f=0x1;_0xd1ba8f<$dataWeapons['length'];_0xd1ba8f++){var _0xc84988=$dataWeapons[_0xd1ba8f];if(!!_0xc84988&&_0xc84988[_0x2de8('0xd3')]===_0x1c74ba){return _0xc84988;}}var _0x2b888a=_0x2de8('0xc6')+_0x1c74ba;SceneManager[_0x2de8('0x3f')]();Graphics[_0x2de8('0x9')](_0x2de8('0xc2'),_0x2b888a);return null;};}Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x79')]=Scene_Equip[_0x2de8('0xb5')][_0x2de8('0x21')];Scene_Equip[_0x2de8('0xb5')]['onSlotOk']=function(){if(Imported[_0x2de8('0x94')]){this[_0x2de8('0xaf')]['_slotId']=-0x1;var _0x54a1f1=this['_slotWindow'][_0x2de8('0x2')]();this['_itemWindow'][_0x2de8('0xd7')](_0x54a1f1);Yanfly[_0x2de8('0xd6')][_0x2de8('0x20')][_0x2de8('0xaa')](this);this[_0x2de8('0xaf')][_0x2de8('0xa0')]();}else{Olivia[_0x2de8('0x1c')]['Weapon'][_0x2de8('0x79')]['call'](this);}};Scene_Equip[_0x2de8('0xb5')]['onItemOk']=function(){SoundManager[_0x2de8('0x5')]();var _0x5bb636=this['_slotWindow'][_0x2de8('0x2')]();if(_0x5bb636<$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x1){_0x5bb636=0x0;}else{_0x5bb636-=$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x2;}this[_0x2de8('0x92')]()[_0x2de8('0xca')](_0x5bb636,this[_0x2de8('0xaf')][_0x2de8('0x2c')]());this[_0x2de8('0xc4')][_0x2de8('0xe0')]();this['_slotWindow'][_0x2de8('0x66')]();this[_0x2de8('0xaf')]['deselect']();this[_0x2de8('0xaf')]['refresh']();this['_statusWindow']['refresh']();if(Imported[_0x2de8('0x94')]){this[_0x2de8('0xaf')][_0x2de8('0xcb')]();this[_0x2de8('0x9a')][_0x2de8('0x66')]();}};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x6a')]=Scene_Battle[_0x2de8('0xb5')]['createActorCommandWindow'];Scene_Battle[_0x2de8('0xb5')][_0x2de8('0x77')]=function(){Olivia[_0x2de8('0x1c')][_0x2de8('0x11')]['___Scene_Battle_createActorCommandWindow___']['call'](this);this[_0x2de8('0xd2')][_0x2de8('0xd8')](_0x2de8('0x2e'),this[_0x2de8('0x52')][_0x2de8('0x9e')](this));};Scene_Battle[_0x2de8('0xb5')][_0x2de8('0x52')]=function(){BattleManager[_0x2de8('0x92')]()[_0x2de8('0x55')](_0x2de8('0x57'));this[_0x2de8('0xd2')]['refresh']();this[_0x2de8('0xd2')][_0x2de8('0xe0')]();};function Sprite_WindowArrow(){this[_0x2de8('0x4')]['apply'](this,arguments);}Sprite_WindowArrow[_0x2de8('0xb5')]=Object[_0x2de8('0xd')](Sprite['prototype']);Sprite_WindowArrow[_0x2de8('0xb5')][_0x2de8('0x51')]=Sprite_WindowArrow;Sprite_WindowArrow[_0x2de8('0xb5')][_0x2de8('0x4')]=function(_0x5699c5,_0x29efa0){this[_0x2de8('0x63')]=_0x5699c5;this[_0x2de8('0x1d')]=_0x29efa0;Sprite[_0x2de8('0xb5')][_0x2de8('0x4')][_0x2de8('0xaa')](this);this[_0x2de8('0x7b')]();};Sprite_WindowArrow[_0x2de8('0xb5')][_0x2de8('0x7b')]=function(){this[_0x2de8('0x8e')]=ImageManager['loadSystem'](_0x2de8('0xa8'));this[_0x2de8('0x8e')][_0x2de8('0x29')](this[_0x2de8('0xbf')][_0x2de8('0x9e')](this));};Sprite_WindowArrow[_0x2de8('0xb5')][_0x2de8('0xbf')]=function(){if(this[_0x2de8('0x1d')]==='left'){this[_0x2de8('0xdc')](0x78,0x24,0x18,0x18);this[_0x2de8('0xab')]['x']=-0.1;this['x']=0x0;}else{this[_0x2de8('0xdc')](0x90,0x24,0x18,0x18);this[_0x2de8('0xab')]['x']=1.1;this['x']=this['_parent'][_0x2de8('0xb6')];}this[_0x2de8('0xab')]['y']=0.5;};Sprite_WindowArrow['prototype'][_0x2de8('0xb0')]=function(){Sprite[_0x2de8('0xb5')][_0x2de8('0xb0')][_0x2de8('0xaa')](this);this['updateOpacity']();};Sprite_WindowArrow['prototype'][_0x2de8('0xa9')]=function(){if(!this[_0x2de8('0x63')][_0x2de8('0x3a')]||this[_0x2de8('0x63')][_0x2de8('0x67')]<0xff||this[_0x2de8('0x63')][_0x2de8('0xd9')]<0xff){this[_0x2de8('0x3d')]=0x0;this[_0x2de8('0x4a')]=-0x1;}else if(this[_0x2de8('0x4a')]!==this[_0x2de8('0x63')][_0x2de8('0x2')]()){this[_0x2de8('0x4a')]=this[_0x2de8('0x63')][_0x2de8('0x2')]();var _0x4d0458=this[_0x2de8('0x63')][_0x2de8('0x8')](this[_0x2de8('0x63')][_0x2de8('0x32')](_0x2de8('0x75')));var _0x132427=_0x4d0458['y']+this[_0x2de8('0x63')][_0x2de8('0xb4')]();if(_0x132427>0x0&&_0x132427<this[_0x2de8('0x63')]['height']-this[_0x2de8('0x63')][_0x2de8('0xb4')]()*0x2){_0x132427+=Math['round'](this['_parent']['lineHeight']()/0x2);this[_0x2de8('0x3d')]=0xff;this['y']=_0x132427;}else{this[_0x2de8('0x3d')]=0x0;}}};Window_EquipSlot[_0x2de8('0xb5')]['maxItems']=function(){if(!!this[_0x2de8('0x2b')]){var _0x28e205=this[_0x2de8('0x2b')][_0x2de8('0x17')]()[_0x2de8('0x2d')]-0x1;_0x28e205+=$dataSystem[_0x2de8('0xc')]['length']-0x1;return _0x28e205;}else{return 0x0;}};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x84')]=Window_EquipSlot['prototype'][_0x2de8('0x62')];Window_EquipSlot[_0x2de8('0xb5')][_0x2de8('0x62')]=function(_0x10e596){if(_0x10e596<$dataSystem['weaponTypes'][_0x2de8('0x2d')]-0x1){return $dataSystem[_0x2de8('0xc')][_0x10e596+0x1];}else{_0x10e596-=$dataSystem[_0x2de8('0xc')]['length']-0x2;}return Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x84')]['call'](this,_0x10e596);};Olivia['OctoBattle'][_0x2de8('0x11')][_0x2de8('0x86')]=Window_EquipSlot[_0x2de8('0xb5')][_0x2de8('0x7d')];Window_EquipSlot[_0x2de8('0xb5')][_0x2de8('0x7d')]=function(_0x25731c){if(_0x25731c<$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x1){_0x25731c+=0x1;return this[_0x2de8('0x2b')]['isEquipWtypeOk'](_0x25731c);}else{_0x25731c-=$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x2;return Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x86')][_0x2de8('0xaa')](this,_0x25731c);}};Window_EquipSlot[_0x2de8('0xb5')][_0x2de8('0x2c')]=function(){if(!!this[_0x2de8('0x2b')]){var _0x576463=this[_0x2de8('0x2')]();return this[_0x2de8('0x44')](_0x576463);}else{return null;}return this[_0x2de8('0x2b')]?this[_0x2de8('0x2b')][_0x2de8('0xc8')]()[this[_0x2de8('0x2')]()]:null;};Window_EquipSlot[_0x2de8('0xb5')]['drawItem']=function(_0x222375){if(Imported[_0x2de8('0x94')]){this[_0x2de8('0xb3')](_0x222375);}else{this[_0x2de8('0x2f')](_0x222375);}};Window_EquipSlot['prototype'][_0x2de8('0x44')]=function(_0x4ea4c7){if(_0x4ea4c7<$dataSystem[_0x2de8('0xc')]['length']-0x1){return this[_0x2de8('0x2b')][_0x2de8('0xe')]()[_0x4ea4c7];}else{_0x4ea4c7-=$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x2;return this[_0x2de8('0x2b')][_0x2de8('0xc8')]()[_0x4ea4c7];}};Window_EquipSlot[_0x2de8('0xb5')][_0x2de8('0xb3')]=function(_0x5e5db4){if(!this[_0x2de8('0x2b')])return;var _0x11e2a6=this['itemRectForText'](_0x5e5db4);this[_0x2de8('0xb9')](this[_0x2de8('0x88')]());this['changePaintOpacity'](this[_0x2de8('0x7d')](_0x5e5db4));var _0x56194d=this[_0x2de8('0xad')];this[_0x2de8('0x25')](this[_0x2de8('0x62')](_0x5e5db4),_0x11e2a6['x'],_0x11e2a6['y'],_0x56194d);var _0x4e079c=_0x11e2a6[_0x2de8('0xb6')]-_0x56194d;var _0x274e42=this[_0x2de8('0x44')](_0x5e5db4);if(_0x274e42){this['drawItemName'](_0x274e42,_0x11e2a6['x']+_0x56194d,_0x11e2a6['y'],_0x4e079c);}else if(this[_0x2de8('0x7d')](_0x5e5db4)){this[_0x2de8('0x40')](_0x11e2a6['x']+_0x56194d,_0x11e2a6['y'],_0x4e079c);}this[_0x2de8('0x39')](!![]);};Window_EquipSlot[_0x2de8('0xb5')]['drawItemWeaponSwapBase']=function(_0x58ab7d){if(this['_actor']){var _0x2e1e52=this[_0x2de8('0x6')](_0x58ab7d);this[_0x2de8('0xb9')](this[_0x2de8('0x88')]());this[_0x2de8('0x39')](this[_0x2de8('0x7d')](_0x58ab7d));this[_0x2de8('0x25')](this[_0x2de8('0x62')](_0x58ab7d),_0x2e1e52['x'],_0x2e1e52['y'],0x8a,this[_0x2de8('0x69')]());this[_0x2de8('0x8f')](this[_0x2de8('0x44')](_0x58ab7d),_0x2e1e52['x']+0x8a,_0x2e1e52['y']);this['changePaintOpacity'](!![]);}};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x37')]=Window_EquipSlot[_0x2de8('0xb5')][_0x2de8('0x36')];Window_EquipSlot[_0x2de8('0xb5')][_0x2de8('0x36')]=function(){if(this['_statusWindow']){var _0x4d37b4=JsonEx[_0x2de8('0x1')](this[_0x2de8('0x2b')]);if(this['index']()<$dataSystem['weaponTypes'][_0x2de8('0x2d')]-0x1){var _0x4549f4=this[_0x2de8('0x2b')][_0x2de8('0xe')]()[this[_0x2de8('0x2')]()];}else{var _0x4549f4=null;}_0x4d37b4[_0x2de8('0xd0')](0x0,_0x4549f4);this[_0x2de8('0x9a')][_0x2de8('0x9d')](_0x4d37b4);}Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x37')][_0x2de8('0xaa')](this);if(this[_0x2de8('0x9a')]){this[_0x2de8('0x9a')][_0x2de8('0x7f')](null);}};Olivia['OctoBattle'][_0x2de8('0x11')][_0x2de8('0x9b')]=Window_EquipItem[_0x2de8('0xb5')][_0x2de8('0x4')];Window_EquipItem[_0x2de8('0xb5')][_0x2de8('0x4')]=function(_0x139a9e,_0x594be0,_0x8252d6,_0xc9085d){this[_0x2de8('0xa1')]=0x0;Olivia[_0x2de8('0x1c')][_0x2de8('0x11')]['___Window_EquipItem_initialize___']['call'](this,_0x139a9e,_0x594be0,_0x8252d6,_0xc9085d);};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0xbb')]=Window_EquipItem[_0x2de8('0xb5')][_0x2de8('0xd7')];Window_EquipItem[_0x2de8('0xb5')][_0x2de8('0xd7')]=function(_0x436f4b){if(_0x436f4b<$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x1){weaponTypeId=_0x436f4b+0x1;_0x436f4b=0x0;if(this[_0x2de8('0xa1')]!==weaponTypeId){this[_0x2de8('0xf')]=0x0;this[_0x2de8('0xa1')]=weaponTypeId;this['refresh']();this['resetScroll']();return;}}else{_0x436f4b-=$dataSystem[_0x2de8('0xc')][_0x2de8('0x2d')]-0x2;this['_weaponTypeId']=0x0;}if(Imported['YEP_EquipCore']){Yanfly[_0x2de8('0xd6')][_0x2de8('0xc3')][_0x2de8('0xaa')](this,_0x436f4b);}else{Olivia['OctoBattle']['Weapon']['___Window_EquipItem_setSlotId___'][_0x2de8('0xaa')](this,_0x436f4b);}};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x82')]=Window_EquipItem[_0x2de8('0xb5')][_0x2de8('0x18')];Window_EquipItem['prototype'][_0x2de8('0x18')]=function(_0x4f9606){if(Olivia[_0x2de8('0x1c')]['Weapon']['___Window_EquipItem_includes___'][_0x2de8('0xaa')](this,_0x4f9606)){if(!!_0x4f9606&&this[_0x2de8('0xf')]<=0x0){return this[_0x2de8('0xa1')]===_0x4f9606[_0x2de8('0xd3')];}else{return!![];}}else{return![];}};Window_EquipItem[_0x2de8('0xb5')][_0x2de8('0x36')]=function(){Window_ItemList[_0x2de8('0xb5')][_0x2de8('0x36')]['call'](this);if(!!this[_0x2de8('0x2b')]&&this['_statusWindow']){var _0x1bbdfb=JsonEx[_0x2de8('0x1')](this[_0x2de8('0x9a')][_0x2de8('0x2b')]);_0x1bbdfb[_0x2de8('0xd0')](this[_0x2de8('0xf')],this[_0x2de8('0x2c')]());this[_0x2de8('0x9a')]['setTempActor'](_0x1bbdfb);}};Olivia['OctoBattle'][_0x2de8('0x11')][_0x2de8('0x16')]=Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x4')];Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x4')]=function(){Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x16')][_0x2de8('0xaa')](this);if(Olivia[_0x2de8('0x1c')]['WeaponSwap']['ShowArrows']){this[_0x2de8('0x46')]();}};Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x46')]=function(){this['_weaponLeftArrowSprite']=new Sprite_WindowArrow(this,_0x2de8('0x1f'));this[_0x2de8('0x65')](this[_0x2de8('0xdd')]);this[_0x2de8('0xdb')]=new Sprite_WindowArrow(this,_0x2de8('0x57'));this[_0x2de8('0x65')](this[_0x2de8('0xdb')]);};Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x7a')]=Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x81')];Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x81')]=function(){Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x7a')][_0x2de8('0xaa')](this);if(Olivia[_0x2de8('0x1c')]['WeaponSwap'][_0x2de8('0x38')]){this[_0x2de8('0x91')]();}};Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x91')]=function(){var _0x1176e5=Olivia['OctoBattle'][_0x2de8('0xc5')][_0x2de8('0x45')];this['addCommand'](_0x1176e5,'weaponSwap',this[_0x2de8('0x6b')]());};Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x6b')]=function(){if(this[_0x2de8('0x2b')][_0x2de8('0x8a')]()){var _0x193772=0x0;var _0x21b5ff=this['_actor']['getSwapWeapons']();for(var _0x4a00cb=0x0;_0x4a00cb<_0x21b5ff[_0x2de8('0x2d')];_0x4a00cb++){var _0x33f56c=_0x21b5ff[_0x4a00cb];if(!!_0x33f56c){_0x193772+=0x1;if(_0x193772>=0x2){return!![];}}}}return![];};Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0xd5')]=function(_0x1f3a3d){if(Olivia[_0x2de8('0x1c')][_0x2de8('0xc5')][_0x2de8('0x7c')]){this[_0x2de8('0x4f')](_0x1f3a3d);}Window_Command[_0x2de8('0xb5')]['drawItem'][_0x2de8('0xaa')](this,_0x1f3a3d);};Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x4f')]=function(_0x561934){if(this[_0x2de8('0x50')][_0x561934][_0x2de8('0x72')]==='attack'){var _0x37c616=this['itemRect'](_0x561934);if(this[_0x2de8('0x1b')]()===_0x2de8('0x1f')){var _0xf837ed=_0x37c616[_0x2de8('0xb6')]-Window_Base[_0x2de8('0x89')]-0x2;}else{var _0xf837ed=_0x37c616['x']+0x2;}var _0x480982=this[_0x2de8('0x2b')][_0x2de8('0x68')]()[0x0];if(!!_0x480982){var _0x41904b=_0x480982[_0x2de8('0x4b')];}else{var _0x41904b=0x4d;}this[_0x2de8('0xa3')](_0x41904b,_0xf837ed,_0x37c616['y']+0x2);}};if(Olivia[_0x2de8('0x1c')][_0x2de8('0xc5')][_0x2de8('0xc1')]){Window_ActorCommand['prototype'][_0x2de8('0xb8')]=function(){if(this[_0x2de8('0xdf')]&&Input[_0x2de8('0x74')](_0x2de8('0x57'))&&this['currentSymbol']()===_0x2de8('0x75')){this[_0x2de8('0x2b')][_0x2de8('0x55')](_0x2de8('0x57'));SoundManager[_0x2de8('0x5')]();this[_0x2de8('0x66')]();}else if(this[_0x2de8('0xdf')]&&Input[_0x2de8('0x74')](_0x2de8('0x1f'))&&this['currentSymbol']()===_0x2de8('0x75')){this[_0x2de8('0x2b')][_0x2de8('0x55')](_0x2de8('0x1f'));SoundManager[_0x2de8('0x5')]();this[_0x2de8('0x66')]();}else{Window_Command[_0x2de8('0xb5')][_0x2de8('0xb8')][_0x2de8('0xaa')](this);}};}Window_ActorCommand[_0x2de8('0xb5')][_0x2de8('0x90')]=function(){if(this[_0x2de8('0x99')]()===_0x2de8('0x2e')){SoundManager[_0x2de8('0x5')]();}else{Window_Command[_0x2de8('0xb5')][_0x2de8('0x90')][_0x2de8('0xaa')](this);}};if(Imported[_0x2de8('0x94')]&&Olivia['OctoBattle'][_0x2de8('0xc5')][_0x2de8('0x28')]){Olivia[_0x2de8('0x1c')][_0x2de8('0x11')][_0x2de8('0x23')]=Window_StatCompare['prototype'][_0x2de8('0x66')];Window_StatCompare[_0x2de8('0xb5')][_0x2de8('0x66')]=function(){Olivia['OctoBattle'][_0x2de8('0x11')]['___Window_StatCompare_refresh___'][_0x2de8('0xaa')](this);if(!!this[_0x2de8('0x2b')]){this[_0x2de8('0x42')]();}};Window_StatCompare[_0x2de8('0xb5')][_0x2de8('0x42')]=function(){this['drawExtraParamItem'](_0x2de8('0x9c'),0x0,this[_0x2de8('0x69')]()*0x8);this[_0x2de8('0x87')](_0x2de8('0x6d'),0x0,this['lineHeight']()*0x9);this[_0x2de8('0x87')](_0x2de8('0x61'),0x0,this[_0x2de8('0x69')]()*0xa);};Window_StatCompare[_0x2de8('0xb5')][_0x2de8('0x87')]=function(_0xbfd5a,_0xc45fc9,_0x36673f){this[_0x2de8('0x5d')](_0xc45fc9,_0x36673f,this['contents'][_0x2de8('0xb6')],this[_0x2de8('0x69')]());this[_0x2de8('0xcd')](_0x36673f,_0xbfd5a);this[_0x2de8('0x8d')](_0x36673f,_0xbfd5a);this['drawRightArrow'](_0x36673f);if(this[_0x2de8('0x95')]){this[_0x2de8('0x71')](_0x36673f,_0xbfd5a);this[_0x2de8('0x4c')](_0x36673f,_0xbfd5a);}};Window_StatCompare['prototype'][_0x2de8('0xcd')]=function(_0x530a68,_0x5e10d8){if(_0x5e10d8===_0x2de8('0x9c')){var _0x174e7d=Olivia[_0x2de8('0x1c')][_0x2de8('0xc5')][_0x2de8('0x6f')];}else if(_0x5e10d8===_0x2de8('0x6d')){var _0x174e7d=Olivia['OctoBattle'][_0x2de8('0xc5')]['TextEva'];}else if(_0x5e10d8===_0x2de8('0x61')){var _0x174e7d=Olivia[_0x2de8('0x1c')][_0x2de8('0xc5')][_0x2de8('0x93')];}var _0x680998=this[_0x2de8('0xda')]();this['changeTextColor'](this[_0x2de8('0x88')]());this[_0x2de8('0x25')](_0x174e7d,_0x680998,_0x530a68,this[_0x2de8('0x1e')]);};Window_StatCompare['prototype'][_0x2de8('0x8d')]=function(_0x52c01a,_0x49b0ab){if(_0x49b0ab===_0x2de8('0x9c')){var _0x6a0b7a=Math['round'](this[_0x2de8('0x2b')][_0x2de8('0x9c')]*0x64)+'%';}else if(_0x49b0ab===_0x2de8('0x6d')){var _0x6a0b7a=Math['round'](this['_actor'][_0x2de8('0x6d')]*0x64)+'%';}else if(_0x49b0ab==='cri'){var _0x6a0b7a=Math[_0x2de8('0x41')](this[_0x2de8('0x2b')][_0x2de8('0x61')]*0x64)+'%';}var _0x2a44db=this[_0x2de8('0x4d')][_0x2de8('0xb6')]-this[_0x2de8('0xda')]();_0x2a44db-=this[_0x2de8('0xbc')]*0x2+this[_0x2de8('0x5a')]+this[_0x2de8('0x3c')];this['resetTextColor']();this[_0x2de8('0x25')](_0x6a0b7a,_0x2a44db,_0x52c01a,this[_0x2de8('0xbc')],_0x2de8('0x57'));};Window_StatCompare[_0x2de8('0xb5')][_0x2de8('0x71')]=function(_0xf03006,_0x8c6913){if(_0x8c6913===_0x2de8('0x9c')){var _0x1886d5=Math[_0x2de8('0x41')](this['_tempActor'][_0x2de8('0x9c')]*0x64);var _0x4ca9fc=_0x1886d5-Math[_0x2de8('0x41')](this[_0x2de8('0x2b')][_0x2de8('0x9c')]*0x64);}else if(_0x8c6913===_0x2de8('0x6d')){var _0x1886d5=Math['round'](this['_tempActor'][_0x2de8('0x6d')]*0x64);var _0x4ca9fc=_0x1886d5-Math[_0x2de8('0x41')](this[_0x2de8('0x2b')]['eva']*0x64);}else if(_0x8c6913==='cri'){var _0x1886d5=Math[_0x2de8('0x41')](this['_tempActor']['cri']*0x64);var _0x4ca9fc=_0x1886d5-Math[_0x2de8('0x41')](this[_0x2de8('0x2b')]['cri']*0x64);}var _0x4cadfb=this[_0x2de8('0x4d')][_0x2de8('0xb6')]-this[_0x2de8('0xda')]();_0x4cadfb-=this[_0x2de8('0xbc')]+this['_bonusValueWidth'];var _0x44c51d=_0x1886d5+'%';this['changeTextColor'](this[_0x2de8('0x59')](_0x4ca9fc));this['drawText'](_0x44c51d,_0x4cadfb,_0xf03006,this[_0x2de8('0xbc')],_0x2de8('0x57'));};Window_StatCompare['prototype']['drawExtraParamDifference']=function(_0x2fd731,_0x11fb07){var _0x508525=this[_0x2de8('0x4d')][_0x2de8('0xb6')]-this[_0x2de8('0xda')]();_0x508525-=this[_0x2de8('0x3c')];if(_0x11fb07===_0x2de8('0x9c')){var _0x4c6afa=Math[_0x2de8('0x41')](this[_0x2de8('0x95')][_0x2de8('0x9c')]*0x64);var _0x416bd3=_0x4c6afa-Math[_0x2de8('0x41')](this[_0x2de8('0x2b')]['hit']*0x64);}else if(_0x11fb07===_0x2de8('0x6d')){var _0x4c6afa=Math[_0x2de8('0x41')](this[_0x2de8('0x95')][_0x2de8('0x6d')]*0x64);var _0x416bd3=_0x4c6afa-Math[_0x2de8('0x41')](this[_0x2de8('0x2b')][_0x2de8('0x6d')]*0x64);}else if(_0x11fb07===_0x2de8('0x61')){var _0x4c6afa=Math[_0x2de8('0x41')](this['_tempActor'][_0x2de8('0x61')]*0x64);var _0x416bd3=_0x4c6afa-Math[_0x2de8('0x41')](this[_0x2de8('0x2b')]['cri']*0x64);}if(_0x416bd3===0x0)return;this[_0x2de8('0xb9')](this[_0x2de8('0x59')](_0x416bd3));var _0x3a4597=_0x416bd3+'%';if(_0x416bd3>0x0){_0x3a4597='\x20(+'+_0x3a4597+')';}else{_0x3a4597='\x20('+_0x3a4597+')';}this[_0x2de8('0x25')](_0x3a4597,_0x508525,_0x2fd731,this[_0x2de8('0x3c')],_0x2de8('0x1f'));};}